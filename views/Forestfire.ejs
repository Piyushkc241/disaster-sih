<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hailstorm Safety Module</title>
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>

<!-- HEADER -->
<header class="subpage-header">
  <div class="container sub-header-inner">

    <div class="left-side">
      <a href="/index" class="breadcrumb-link" data-translate>‚Üê Back to Modules</a>
      <span class="badge-soft" data-translate>Student Module</span>
    </div>

    <div class="lang-right">
      üåê
      <select id="langSelect" class="lang-dropdown">
        <option value="en">English</option>
        <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
        <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option>
      </select>
    </div>

  </div>
</header>

<!-- HERO -->
<section class="module-hero">
  <div class="container hero-content">

    <div class="hero-left">
      <h1 id="moduleTitle" data-translate>Hailstorm Safety</h1>
      <p id="moduleIntro" data-translate>
        Hailstorms occur when powerful updrafts in thunderstorms lift raindrops into extremely cold areas of the atmosphere,
        forming ice balls called hail. Learn how they form and how to stay safe during severe hailstorms.
      </p>

      <div class="accessibility-tools">
        <button id="ttsBtn" class="pill-btn">üîä Text to Speech</button>
        <button id="ttsStopBtn" class="pill-btn">‚õî Stop Reading</button>
        <button id="largeTextBtn" class="pill-btn">A‚Üï Increase Text Size</button>
        <button id="contrastBtn" class="pill-btn">‚óë High Contrast</button>
      </div>
    </div>

    <div class="hero-right">
      <img src="/assets/Hailstorm.jpeg" class="hero-img" alt="Hailstorm Image" />
    </div>

  </div>
</section>

<!-- MAIN CONTENT -->
<section class="section">
  <div class="container module-layout">

    <div class="module-main">

<!-- ABOUT -->
<article class="content-card">
  <h2 data-translate>About Hailstorms</h2>
  <p data-translate>
    A hailstorm is a weather event where chunks of ice (hailstones) fall from the sky.
    They can range from small pellets to large stones capable of damaging property,
    crops, vehicles, and even causing injury.
  </p>
  <p data-translate>
    Hailstorms are common in northern and central India such as Punjab, Haryana, Uttar Pradesh, Madhya Pradesh, and Maharashtra.
  </p>
</article>

<!-- CAUSES -->
<article class="content-card">
  <h2 data-translate>How Hailstorms Form</h2>
  <ul>
    <li data-translate>Strong thunderstorms with powerful updrafts.</li>
    <li data-translate>Moist air rising rapidly into cold upper atmosphere.</li>
    <li data-translate>Raindrops freeze, fall, and get pushed up repeatedly.</li>
    <li data-translate>More layers of ice form ‚Üí creating larger hailstones.</li>
  </ul>
</article>

<!-- WARNING SIGNS -->
<article class="content-card">
  <h2 data-translate>Warning Signs</h2>
  <ul>
    <li data-translate>Dark, rotating thunderclouds.</li>
    <li data-translate>Sudden drop in temperature.</li>
    <li data-translate>Strong winds before rainfall.</li>
    <li data-translate>Thunder & lightning intensifying.</li>
    <li data-translate>Weather apps/IMD alerts showing severe thunderstorms.</li>
  </ul>
</article>

<!-- PREPAREDNESS -->
<article class="content-card">
  <h2 data-translate>Preparedness Before a Hailstorm</h2>
  <ul>
    <li data-translate>Keep vehicles under shelter or cover with blankets.</li>
    <li data-translate>Stay indoors during severe weather alerts.</li>
    <li data-translate>Reinforce weak windows with curtains or shutters.</li>
    <li data-translate>Bring pets indoors.</li>
    <li data-translate>Secure outdoor items like plants and furniture.</li>
  </ul>
</article>

<!-- DOs & DON'Ts -->
<article class="content-card">
  <h2 data-translate>Do‚Äôs & Don‚Äôts</h2>

  <h3 data-translate>‚úî Do‚Äôs</h3>
  <ul>
    <li data-translate>Stay away from windows.</li>
    <li data-translate>Protect your head with helmets if outdoors.</li>
    <li data-translate>Use sturdy shelter like a concrete building.</li>
    <li data-translate>Listen to IMD weather warnings.</li>
  </ul>

  <h3 data-translate>‚ùå Don‚Äôts</h3>
  <ul>
    <li data-translate>Do NOT stay in open fields.</li>
    <li data-translate>Do NOT stand under trees (lightning risk).</li>
    <li data-translate>Do NOT drive during heavy hail unless necessary.</li>
    <li data-translate>Do NOT ignore early thunderstorm warnings.</li>
  </ul>
</article>

<!-- HELPING OTHERS -->
<article class="content-card">
  <h2 data-translate>How to Help Others</h2>
  <ul>
    <li data-translate>Assist injured people safely.</li>
    <li data-translate>Check roofs, windows, and trees for dangerous damage.</li>
    <li data-translate>Provide shelter to pets and livestock.</li>
    <li data-translate>Inform others about IMD severe thunderstorm/hail alerts.</li>
  </ul>
</article>

<!-- SIGN LANGUAGE -->
<article class="content-card">
  <h2 data-translate>Sign Language Support</h2>
  <video controls muted class="sign-video">
    <source src="/assets/Coming_Soon.mp4" type="video/mp4">
  </video>
  <p class="media-caption" data-translate>Hailstorm safety explained in sign language.</p>
</article>

    </div>

    <!-- RIGHT SIDEBAR -->
    <aside class="module-side">

      <article class="content-card">
        <h2 data-translate>Animation</h2>
        <video src="/assets/Hailstorm_Animation.mp4" autoplay muted loop></video>
        <p class="media-caption">Hailstorm</p>
      </article>

      <article class="content-card">
        <h3 data-translate>Quick Summary</h3>
        <ul>
          <li data-translate>What are hailstorms?</li>
          <li data-translate>Warning signs</li>
          <li data-translate>Indoor & outdoor safety</li>
          <li data-translate>Emergency actions</li>
        </ul>
      </article>

      <article class="content-card">
        <h3 data-translate>Emergency Checklist</h3>
        <ul>
          <li data-translate>Emergency torch</li>
          <li data-translate>Helmet / head protection</li>
          <li data-translate>Thick blankets</li>
          <li data-translate>Emergency numbers</li>
          <li data-translate>Weather alert app</li>
        </ul>
      </article>

      <article class="content-card">
        <h3 data-translate>Hailstorm Do‚Äôs & Don‚Äôts</h3>
        <ul>
          <li data-translate>‚úî Stay indoors</li>
          <li data-translate>‚úî Protect vehicles</li>
          <li data-translate>‚ùå Don't stand near windows</li>
          <li data-translate>‚ùå Don't stay outdoors</li>
        </ul>
      </article>

    </aside>

  </div>
</section>


<!-- QUIZ -->
<section class="quiz-section">
  <div class="container quiz-grid">

    <!-- LEFT QUIZ -->
    <div class="quiz-left">
      <h2 data-translate>Quick Quiz</h2>
      <p data-translate>Check what you learned from this module.</p>

      <form id="quizForm" class="quiz-form">

        <div class="quiz-question">
          <p data-translate>1. What causes hailstones?</p>
          <label><input type="radio" name="q1" value="a" data-translate> Light rainfall</label>
          <label><input type="radio" name="q1" value="b" data-translate> Strong thunderstorm updrafts</label>
          <label><input type="radio" name="q1" value="c" data-translate> Sunshine</label>
        </div>

        <div class="quiz-question">
          <p data-translate>2. What should you avoid during a hailstorm?</p>
          <label><input type="radio" name="q2" value="a" data-translate> Staying indoors</label>
          <label><input type="radio" name="q2" value="b" data-translate> Standing under trees</label>
          <label><input type="radio" name="q2" value="c" data-translate> Closing windows</label>
        </div>

        <div class="quiz-question">
          <p data-translate>3. Which area is safer during a hailstorm?</p>
          <label><input type="radio" name="q3" value="a" data-translate> Open field</label>
          <label><input type="radio" name="q3" value="b" data-translate> Inside a concrete building</label>
          <label><input type="radio" name="q3" value="c" data-translate> On a bike or scooter</label>
        </div>

        <button type="submit" class="submit-quiz-btn" data-translate>Submit Quiz</button>
      </form>

      <p id="quizResult" class="quiz-result"></p>
    </div>

    <!-- RIGHT MAP -->
    <div class="quiz-right">
      <article class="content-card">
        <h3 data-translate>Hailstorm Prone Areas of India</h3>
        <img src="/assets/Hailstorm_Map.png" class="map-img" alt="Hailstorm Map">
        <p class="media-caption" data-translate>
          Northern and central states like Punjab, Haryana, UP, MP, and Maharashtra face frequent hailstorms.
        </p>
      </article>
    </div>

  </div>
</section>

<script src="/js/module.js"></script>

<!--Translation-->
<script>
async function fetchTranslation(text, lang) {
    const url = `https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=en|${lang}`;
    const res = await fetch(url);

    if (!res.ok) throw new Error("Translation failed: " + res.status);

    const data = await res.json();
    return data.responseData?.translatedText || text;
}

async function translatePage(lang) {
    const elements = document.querySelectorAll("[data-translate]");

    document.body.style.opacity = "0"; // hide page safely

    let cache = {};
    try {
        cache = JSON.parse(localStorage.getItem("translations_" + lang)) || {};
    } catch {
        cache = {};
    }

    const tempResults = {};

    try {
        // translate all text in advance
        for (let el of elements) {
            const original = el.getAttribute("data-original") || el.innerText;
            el.setAttribute("data-original", original);

            if (!cache[original]) {
                cache[original] = await fetchTranslation(original, lang);
            }

            tempResults[original] = cache[original];
        }

        // save updated translations
        localStorage.setItem("translations_" + lang, JSON.stringify(cache));

        // apply all translations at once
        for (let el of elements) { 
            const original = el.getAttribute("data-original");
            el.innerText = tempResults[original];
        }
    } catch (err) {
        console.error("Translation error:", err);
        alert("Translation failed, showing original text.");

        // fallback ‚Üí restore English
        for (let el of elements) {
            const original = el.getAttribute("data-original");
            if (original) el.innerText = original;
        }
    } finally {
        // make page visible ALWAYS
        document.body.style.opacity = "1";
    }
}

document.getElementById("langSelect").addEventListener("change", function () {
    const lang = this.value;

    if (lang === "en") {
        document.querySelectorAll("[data-translate]").forEach(el => {
            el.innerText = el.getAttribute("data-original");
        });
        return;
    }

    translatePage(lang);
});
</script>

</body>
</html>