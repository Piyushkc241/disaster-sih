<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Flood Preparedness Module</title>
  <link rel="stylesheet" href="/css/styles.css" />
</head>
<body>

<!-- HEADER / Breadcrumb -->
<header class="subpage-header">
  <div class="container sub-header-inner">

    <div class="left-side">
      <a href="/index" class="breadcrumb-link" data-translate>‚Üê Back to Modules</a>
      <span class="badge-soft" data-translate>Student Module</span>
    </div>

    <div class="lang-right">
      üåê
      <select id="langSelect" class="lang-dropdown">
        <option value="en">English</option>
        <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
        <option value="pa">‡®™‡©∞‡®ú‡®æ‡®¨‡©Ä</option>
      </select>
    </div>

  </div>
</header>


<!-- HERO SECTION -->
<section class="module-hero">
  <div class="container hero-content">
    
    <!-- LEFT SIDE TEXT -->
    <div class="hero-left">
      <h1 id="moduleTitle" data-translate>Flood Preparedness</h1>
      <p id="moduleIntro" data-translate>
        Floods occur when overflowing water submerges normally dry land. Learn causes, warning levels,
        evacuation steps, and Punjab-specific flood risks.
      </p>

      <!-- Accessibility Buttons -->
      <div class="accessibility-tools">
        <button id="ttsBtn" class="pill-btn">üîä Text to Speech</button>
        <button id="ttsStopBtn" class="pill-btn">‚õî Stop Reading</button>
        <button id="largeTextBtn" class="pill-btn">A‚Üï Increase Text Size</button>
        <button id="contrastBtn" class="pill-btn">‚óë High Contrast</button>
      </div>
    </div>

    <!-- RIGHT SIDE IMAGE -->
    <div class="hero-right">
      <img src="/assets/flood.jpg" class="hero-img" alt="Flood Image"/>
    </div>

  </div>
</section>


<!-- MAIN CONTENT -->
<section class="section">
  <div class="container module-layout">

    <!-- LEFT CONTENT -->
    <div class="module-main">

<!-- ABOUT FLOODS -->
<article class="content-card">
  <h2 data-translate>About Floods</h2>
  <p data-translate>
    Floods happen when heavy rainfall, overflowing rivers, or poor drainage causes water to cover land
    that is normally dry. Punjab faces frequent flooding due to monsoon rains, river overflow
    (Sutlej, Beas, Ravi, Ghaggar), and urban drainage issues.
  </p>
  <p data-translate>
    Low-lying areas in Punjab such as Ropar, Jalandhar, Ferozepur, Patiala, and Gurdaspur are highly vulnerable.
  </p>
</article>

<!-- PREPAREDNESS SECTION -->
<article class="content-card">
  <h2 data-translate>Preparedness Before a Flood</h2>
  <ul>
    <li data-translate>Keep important documents in waterproof bags.</li>
    <li data-translate>Prepare an emergency kit with water, food, medicines, flashlight, and radio.</li>
    <li data-translate>Know flood shelters and evacuation routes in your locality.</li>
    <li data-translate>Move animals and vehicles to higher ground.</li>
    <li data-translate>Avoid disposing garbage in drains and rivers.</li>
    <li data-translate>Stay updated with IMD and Punjab disaster alerts.</li>
  </ul>
</article>

<!-- DOs & DON‚ÄôTs -->
<article class="content-card">
  <h2 data-translate>Do‚Äôs & Don‚Äôts During Flood</h2>

  <h3 data-translate>‚úî Do‚Äôs</h3>
  <ul>
    <li data-translate>Move immediately to higher ground.</li>
    <li data-translate>Turn off electricity and gas supply before evacuating.</li>
    <li data-translate>Take your emergency kit and essential medicines.</li>
    <li data-translate>Help children, elderly, and persons with disabilities.</li>
  </ul>

  <h3 data-translate>‚ùå Don‚Äôts</h3>
  <ul>
    <li data-translate>Do NOT walk or drive through moving floodwater.</li>
    <li data-translate>Do NOT touch electric poles, transformers, or wet wires.</li>
    <li data-translate>Do NOT drink untreated water.</li>
    <li data-translate>Do NOT spread rumors or panic.</li>
  </ul>
</article>

<!-- HELPING OTHERS -->
<article class="content-card">
  <h2 data-translate>How to Help Others After a Flood</h2>
  <ul>
    <li data-translate>Rescue and assist children, elderly, and people with disabilities.</li>
    <li data-translate>Provide clean drinking water and food.</li>
    <li data-translate>Give first aid to injured individuals.</li>
    <li data-translate>Report damaged electrical lines and contaminated water.</li>
    <li data-translate>Help in community cleanup activities.</li>
  </ul>
</article>

<!-- SIGN LANGUAGE -->
<article class="content-card">
  <h2 data-translate>Sign Language Support</h2>
  <video controls muted class="sign-video">
    <source src="/assets/Flood_SL.mp4" type="video/mp4" />
  </video>
  <p class="media-caption" data-translate>Sign language explanation for flood awareness.</p>
</article>

    </div>

    <!-- RIGHT SIDEBAR -->
    <aside class="module-side">

      <!-- Animation Section -->
      <article class="content-card">
        <h2 data-translate>Animation</h2>
        <video src="/assets/Flood_Video.mp4" autoplay muted loop></video>
        <p class="media-caption" data-translate>Animation explaining how floods occur.</p>
      </article>

      <!-- Quick Summary Points -->
      <article class="content-card">
        <h3 data-translate>Quick Summary</h3>
        <ul>
          <li data-translate>Causes of floods</li>
          <li data-translate>Warning levels</li>
          <li data-translate>Safety steps</li>
          <li data-translate>Evacuation guidelines</li>
        </ul>
      </article>

      <!-- Emergency Checklist -->
      <article class="content-card">
        <h3 data-translate>Emergency Checklist</h3>
        <ul>
          <li data-translate>Water, food & medicines</li>
          <li data-translate>Flashlight & batteries</li>
          <li data-translate>Waterproof bag for documents</li>
          <li data-translate>First-aid kit</li>
          <li data-translate>Emergency contact list</li>
        </ul>
      </article>

      <!-- Do's & Don'ts Quick Card -->
      <article class="content-card">
        <h3 data-translate>Flood Do‚Äôs & Don‚Äôts</h3>
        <ul>
          <li data-translate>‚úî Move to higher ground</li>
          <li data-translate>‚úî Carry emergency kit</li>
          <li data-translate>‚ùå Avoid floodwater</li>
          <li data-translate>‚ùå Stay away from electric poles</li>
        </ul>
      </article>

    </aside>

  </div>
</section>


<!-- QUIZ SECTION (Split Layout with Map) -->
<section class="quiz-section">
  <div class="container quiz-grid">

    <!-- LEFT SIDE: QUIZ -->
    <div class="quiz-left">
      <h2 data-translate>Quick Quiz</h2>
      <p translate>Check what you learned from this module.</p>

      <form id="quizForm" class="quiz-form">

        <div class="quiz-question">
          <p data-translate>1. What should you do first during a flood warning?</p>
          <label data-translate><input type="radio" name="q1" value="a"> Stay near the river</label>
          <label data-translate><input type="radio" name="q1" value="b"> Move to higher ground</label>
          <label data-translate><input type="radio" name="q1" value="c"> Ignore warnings</label>
        </div>

        <div class="quiz-question">
          <p data-translate>2. Which areas in Punjab are most flood-prone?</p>
          <label data-translate><input type="radio" name="q2" value="a"> Hilly areas</label>
          <label data-translate><input type="radio" name="q2" value="b"> Low-lying river districts</label>
          <label data-translate><input type="radio" name="q2" value="c"> Desert areas</label>
        </div>

        <div class="quiz-question">
          <p data-translate>3. What should you avoid during floods?</p>
          <label data-translate><input type="radio" name="q3" value="a"> Walking in water</label>
          <label data-translate><input type="radio" name="q3" value="b"> Listening to alerts</label>
          <label data-translate><input type="radio" name="q3" value="c"> Helping neighbors</label>
        </div>

        <button type="submit" class="submit-quiz-btn" data-translate>Submit Quiz</button>
      </form>

      <p id="quizResult" class="quiz-result"></p>
    </div>

    <!-- RIGHT SIDE: MAP -->
    <div class="quiz-right">
      <article class="content-card">
        <h3 data-translate>Flood Prone Zones of Punjab</h3>
        <img src="/assets/Punjab_Map.webp" class="map-img" alt="Punjab Flood Map">
        <p class="media-caption" data-translate>
          Punjab‚Äôs high-risk districts include: Ropar, Jalandhar, Ferozepur, Patiala, Gurdaspur & Tarn Taran.
        </p>
      </article>
    </div>

  </div>
</section>

<script src="/js/module.js"></script>

<!--Translation-->
<script>
async function fetchTranslation(text, lang) {
    const url = `https://api.mymemory.translated.net/get?q=${encodeURIComponent(text)}&langpair=en|${lang}`;
    const res = await fetch(url);

    if (!res.ok) throw new Error("Translation failed: " + res.status);

    const data = await res.json();
    return data.responseData?.translatedText || text;
}

async function translatePage(lang) {
    const elements = document.querySelectorAll("[data-translate]");

    document.body.style.opacity = "0"; // hide page safely

    let cache = {};
    try {
        cache = JSON.parse(localStorage.getItem("translations_" + lang)) || {};
    } catch {
        cache = {};
    }

    const tempResults = {};

    try {
        // translate all text in advance
        for (let el of elements) {
            const original = el.getAttribute("data-original") || el.innerText;
            el.setAttribute("data-original", original);

            if (!cache[original]) {
                cache[original] = await fetchTranslation(original, lang);
            }

            tempResults[original] = cache[original];
        }

        // save updated translations
        localStorage.setItem("translations_" + lang, JSON.stringify(cache));

        // apply all translations at once
        for (let el of elements) {
            const original = el.getAttribute("data-original");
            el.innerText = tempResults[original];
        }
    } catch (err) {
        console.error("Translation error:", err);
        alert("Translation failed, showing original text.");

        // fallback ‚Üí restore English
        for (let el of elements) {
            const original = el.getAttribute("data-original");
            if (original) el.innerText = original;
        }
    } finally {
        // make page visible ALWAYS
        document.body.style.opacity = "1";
    }
}

document.getElementById("langSelect").addEventListener("change", function () {
    const lang = this.value;

    if (lang === "en") {
        document.querySelectorAll("[data-translate]").forEach(el => {
            el.innerText = el.getAttribute("data-original");
        });
        return;
    }

    translatePage(lang);
});
</script>


</body>
</html>


